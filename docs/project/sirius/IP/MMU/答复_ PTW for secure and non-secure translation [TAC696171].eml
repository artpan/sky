X-Alimail-AntiSpam:AC=PASS;BC=-1|-1;BR=01201311R121e2;FP=0|-1|-1|-1|0|-1|-1|-1;HT=e02c03296;MF=haibin.bai@artosyn.cn;NM=1;PH=DS;RN=2;RT=2;SR=0;TI=SMTPD_---.8Dv95JU_1497508541;
Received: from OEMPC(mailfrom:haibin.bai@artosyn.cn ip:116.231.36.252)
          by smtp.aliyun-inc.com(10.147.44.129);
          Thu, 15 Jun 2017 14:35:41 +0800
From: "Robin Bai" <haibin.bai@artosyn.cn>
To: <support-fabric@arm.com>,
	<song.pan@artosyn.cn>
Cc: <song.pan@artosyn.cn>
References: <29607.1497503006.2@gb-connect-int.cambridge.arm.com>
In-Reply-To: <29607.1497503006.2@gb-connect-int.cambridge.arm.com>
Subject: =?UTF-8?Q?=E7=AD=94=E5=A4=8D:_PTW_for_secure_and_non-secur?=
	=?UTF-8?Q?e_translation_=5BTAC696171=5D?=
Date: Thu, 15 Jun 2017 14:36:03 +0800
Message-ID: <00a001d2e5a1$a907ed10$fb17c730$@artosyn.cn>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHmMRoZN7hitjxXFXzOVuPLPiQZzaH+1TYg
Content-Language: zh-cn

Hi Darren,
Ok, I got your point that the TCU can issue secure PTW only when the =
transaction is secure, but now our upstream device is running in a NS =
mode, that's why we can not see secure PTW, we'll try to make them =
consistent and verify it again.
It's crystal clear about the NS bit definition now.

Thank you for the support!
Robin

-----=E9=82=AE=E4=BB=B6=E5=8E=9F=E4=BB=B6-----
=E5=8F=91=E4=BB=B6=E4=BA=BA: support-fabric@arm.com =
[mailto:support-fabric@arm.com]=20
=E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: =
2017=E5=B9=B46=E6=9C=8815=E6=97=A5,=E6=98=9F=E6=9C=9F=E5=9B=9B 13:03
=E6=94=B6=E4=BB=B6=E4=BA=BA: song.pan@artosyn.cn; haibin.bai@artosyn.cn
=E6=8A=84=E9=80=81: song.pan@artosyn.cn; support-fabric@arm.com
=E4=B8=BB=E9=A2=98: Re: PTW for secure and non-secure translation =
[TAC696171]

[From Darren Ma - ARM Technical Support]

Please quote reference number TAC696171 when referring to this issue.

Hello Robin,

For your case, the TCU can issue secure PTW when the transaction is SSD =
secure and TCR.NSCFGx =3D b0 and NS bit in the first level table of =
short descriptor format. Can you confirm that your cases match the above =
conditions? The programming interface should be secure when programming =
the TCR of secure context. It is helpful if you can attach the waveform =
for further investigation if the issue cannot be resolved.

> BTW, I didn't find NS bit in page table entry with V7 short descriptor =
format, can you help clarify this ?

In the Short-descriptor translation table format, the NS bit is defined =
only in the first-level translation tables. The section B3.3.5 Access to =
the Secure or Non-secure physical address map of ARM=C2=AE Architecture =
Reference Manual ARMv7-A and ARMv7-R edition or G4.4.5 Access to the =
Secure or Non-secure physical address map of ARM=C2=AE Architecture =
Reference Manual ARMv8, for ARMv8-A architecture profile, which can both =
accessed from https://developer.arm.com.

Kind Regards,
Darren


--
This e-mail message has been automatically generated by connect.arm.com, =
a web-based service provided by ARM Ltd.  It is intended for the =
addressee only and may contain information that is the property of, =
and/or subject to a confidentiality agreement between the intended =
recipient, their organisation and/or the ARM Group of Companies. If you =
are not the intended recipient of this e-mail message, you should not =
read, copy, forward or otherwise distribute or further disclose the =
information in it; misuse of the contents of this e-mail message may =
violate various laws in your state, country or jurisdiction. If you have =
received this e-mail message in error, please contact the originator of =
this e-mail message via e-mail and delete all copies of this message =
from your computer or network, thank you.
IMPORTANT NOTICE: The contents of this email and any attachments are =
confidential and may also be privileged. If you are not the intended =
recipient, please notify the sender immediately and do not disclose the =
contents to any other person, use it for any purpose, or store or copy =
the information in any medium. Thank you.
